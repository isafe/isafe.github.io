{"meta":{"title":"iSec","subtitle":"梦想的代价非常高,但值得我们去追逐","description":"iSec | 运维安全 | Python | Linux安全 | 数据分析","author":"苏格兰雨季","url":"http://blog.isec.me"},"pages":[{"title":"categories","date":"2016-11-17T03:09:16.483Z","updated":"2016-11-17T03:09:16.475Z","comments":false,"path":"categories/index.html","permalink":"http://blog.isec.me/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2016-11-17T03:09:06.007Z","updated":"2016-11-17T03:09:06.007Z","comments":false,"path":"tags/index.html","permalink":"http://blog.isec.me/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Google Authenticator + SSH public key 实现两步认证","slug":"Google-Authenticator-SSH-public-key-实现两步认证","date":"2015-05-29T11:58:19.000Z","updated":"2016-11-17T03:32:03.937Z","comments":true,"path":"2015/05/29/Google-Authenticator-SSH-public-key-实现两步认证/","link":"","permalink":"http://blog.isec.me/2015/05/29/Google-Authenticator-SSH-public-key-实现两步认证/","excerpt":"","text":"OpenSSH 版本6.2以上才支持AuthenticationMethods 安装依赖：Red Hat, CentOS， Fedora 系统需要安装 pam-devel 包: yum install git pam-devel make gcc-c++ wget -y Ubuntu，Linux Mint，Debian 系统需要安装‘libpam0g-dev包: apt-get install git libpam0g-dev make gcc-c++ wget -y 谷歌身份验证器模块：git clone https://github.com/google/google-authenticator.git cd google-authenticator/libpam ./bootstrap.sh make &amp;&amp; make install 运行google-authenticator开始生成密钥信息google-authenticator Do you want authentication tokens to be time-based (y/n) y 二维码地址 https://www.google.com/chart?chs=200x200&amp;chld=M|0&amp;cht=qr&amp;chl=otpauth://totp/root@localhost%3Fsecret%XXXXXXXXXXXXXX Your new secret key is: XXXXXXXXXXXX Your verification code is 000000 紧急码,只能使用一次 Your emergency scratch codes are: 80801116 43011118 34981118 88321117 93711113 Do you want me to update your &quot;/root/.google_authenticator&quot; file (y/n) y Do you want to disallow multiple uses of the same authentication token? This restricts you to one login about every 30s, but it increases your chances to notice or even prevent man-in-the-middle attacks (y/n) y #每30秒生成一个token By default, tokens are good for 30 seconds and in order to compensate for possible time-skew between the client and the server, we allow an extra token before and after the current time. If you experience problems with poor time synchronization, you can increase the window from its default size of 1:30min to about 4min. Do you want to do so (y/n) y If the computer that you are logging into isn&apos;t hardened against brute-force login attempts, you can enable rate-limiting for the authentication module. By default, this limits attackers to no more than 3 login attempts every 30s. Do you want to enable rate-limiting (y/n) y 配置SSH使用谷歌身份验证器模块编辑/etc/pam.d/sshd 添加如下：auth sufficient pam_google_authenticator.so 注释： auth include password-auth 编辑/etc/ssh/sshd_config,修改PubkeyAuthentication yes ChallengeResponseAuthentication yes AuthenticationMethods publickey,keyboard-interactive PasswordAuthentication no UsePAM yes 重启SSH服务service sshd restart 手机端安装Google 身份验证器Andorid版https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2iOS版https://itunes.apple.com/cn/app/google-authenticator/id388497605手机端打开google 身份验证器,扫二维码或者输入secret key [root@localhost ~]# ssh 127.0.0.1 Authenticated with partial success. Verification code: 6位动态码 Last login: Thu Aug 14 15:20:16 2015 from 127.0.0.1 [root@localhost ~]#","categories":[{"name":"Linux安全","slug":"Linux安全","permalink":"http://blog.isec.me/categories/Linux安全/"}],"tags":[{"name":"安全","slug":"安全","permalink":"http://blog.isec.me/tags/安全/"},{"name":"Linux安全","slug":"Linux安全","permalink":"http://blog.isec.me/tags/Linux安全/"}],"keywords":[{"name":"Linux安全","slug":"Linux安全","permalink":"http://blog.isec.me/categories/Linux安全/"}]},{"title":"Postgresql常用命令","slug":"Postgresql常用命令","date":"2015-05-28T12:11:06.000Z","updated":"2016-11-17T03:27:14.037Z","comments":true,"path":"2015/05/28/Postgresql常用命令/","link":"","permalink":"http://blog.isec.me/2015/05/28/Postgresql常用命令/","excerpt":"","text":"连接数据库, 默认的用户和数据库是postgrespsql -U user -d dbname 切换数据库,相当于mysql的use dbname\\c dbname 列举数据库，相当于mysql的show databases\\l 列举表，相当于mysql的show tables\\dt 查看表结构，相当于desc tblname,show columns from tbname\\d tblname 查看索引\\di 创建数据库：create database dbname; create database dbname OWNER rolename; 删除数据库：drop database dbname; 重命名一个表：alter table oldtablename rename to newtablename; 删除一个表：drop table tablename;","categories":[{"name":"运维","slug":"运维","permalink":"http://blog.isec.me/categories/运维/"}],"tags":[{"name":"Postgresql","slug":"Postgresql","permalink":"http://blog.isec.me/tags/Postgresql/"}],"keywords":[{"name":"运维","slug":"运维","permalink":"http://blog.isec.me/categories/运维/"}]},{"title":"CentOS 6.5 源码安装PostgreSQL","slug":"CentOS-6-5-源码安装PostgreSQL","date":"2015-05-27T12:02:40.000Z","updated":"2016-11-17T03:22:59.347Z","comments":true,"path":"2015/05/27/CentOS-6-5-源码安装PostgreSQL/","link":"","permalink":"http://blog.isec.me/2015/05/27/CentOS-6-5-源码安装PostgreSQL/","excerpt":"","text":"安装依赖：yum install readline readline-devel make zlib zlib-devel 下载源码：wget https://ftp.postgresql.org/pub/source/v9.3.2/postgresql-9.3.2.tar.gz tar -zxf postgresql-9.3.2.tar.gz cd postgresql-9.3.2 ./configure --prefix=/usr/local/pgsql --with-openssl gmake gmake install 添加postgres用户，PostgreSQL的默认超级管理员groupadd postgres adduser -g postgres postgres mkdir /usr/local/pgsql/data chown postgres:postgres /usr/local/pgsql/data 测试su - postgres /usr/local/pgsql/bin/psql -V 初始数据库的存储区间/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data --locale=en_US.UTF8 -U postgres 启动数据库服务器cp contrib/start-scripts/linux /etc/init.d/postgresql chmod a+x /etc/init.d/postgresql /etc/init.d/postgresql start 连接进数据库/usr/local/pgsql/bin/createdb test /usr/local/pgsql/bin/psql -U postgres test 配置一下动态连接库的搜索路径和环境变量在~./bash_profile添加如下内容： PGHOME=/usr/local/pgsql PGDATA=$PGHOME/data PATH=$PATH:$HOME/bin:$PGHOME/bin export PGHOME export PGDATA export PATH ---------------------------- LD_LIBRARY_PATH=/usr/local/pgsql/lib export LD_LIBRARY_PATH PATH=/usr/local/pgsql/bin:$PATH export PATH PostgreSQL9.3安装完成。","categories":[{"name":"运维","slug":"运维","permalink":"http://blog.isec.me/categories/运维/"}],"tags":[{"name":"PostgreSQL","slug":"PostgreSQL","permalink":"http://blog.isec.me/tags/PostgreSQL/"}],"keywords":[{"name":"运维","slug":"运维","permalink":"http://blog.isec.me/categories/运维/"}]},{"title":"Hexo静态博客使用指南","slug":"Hexo静态博客使用指南","date":"2015-05-24T11:41:36.000Z","updated":"2016-11-17T03:33:52.431Z","comments":true,"path":"2015/05/24/Hexo静态博客使用指南/","link":"","permalink":"http://blog.isec.me/2015/05/24/Hexo静态博客使用指南/","excerpt":"","text":"安装Hexo123yum install npm -ynpm config set registry http://registry.npm.taobao.org/npm install hexo-cli -g 12hexo init blogcd blog Hexo常用插件安装与配置1234567npm install hexo --savenpm install hexo-generator-index --savenpm install hexo-generator-archive --savenpm install hexo-generator-category --savenpm install hexo-generator-tag --savenpm install hexo-server --savenpm install hexo-deployer-git --save 1234cd blognpm installcd themesgit clone https://github.com/moretwo/hexo-theme.git","categories":[{"name":"Hexo","slug":"Hexo","permalink":"http://blog.isec.me/categories/Hexo/"}],"tags":[{"name":"Github","slug":"Github","permalink":"http://blog.isec.me/tags/Github/"},{"name":"Hexo","slug":"Hexo","permalink":"http://blog.isec.me/tags/Hexo/"},{"name":"Github Pages","slug":"Github-Pages","permalink":"http://blog.isec.me/tags/Github-Pages/"}],"keywords":[{"name":"Hexo","slug":"Hexo","permalink":"http://blog.isec.me/categories/Hexo/"}]}]}